const translations = {
  zh: {
    "meta.title": "知时 · Zhishi — 为 Windows 优化的时间管理体验",
    "meta.description": "知时是一款专为 Windows 优化的极简时间管理工具，继承 Dayflow 的 Time OS 逻辑，提供原子化日程、能量标签与沉浸式专注体验，并完美融入 Windows 生态。",
    "lang.zh": "中文",
    "lang.en": "English",
    "nav.features": "产品特性",
    "nav.scenarios": "使用场景",
    "nav.faq": "常见问题",
    "nav.download": "下载",
    "nav.cta": "获取知时",
    "hero.eyebrow": "为 Windows 专注打造",
    "hero.title": "知时 — 为 Windows 优化的时间管理体验",
    "hero.subtitle": "承袭 Dayflow 的极简逻辑，针对 Windows 生态深度调校，让熟悉的快捷方式、界面语言与性能优化共鸣，帮助你在 PC 上保持 Mac 级的工作节奏。",
    "hero.primary": "下载 Windows 版本",
    "hero.secondary": "了解一分钟演示",
    "hero.note": "<strong>40,000+</strong> Windows 创作者与团队已通过知时延续 Dayflow 的专注节奏。",
    "hero.schedule.date": "5月23日",
    "hero.schedule.day": "周四",
    "hero.schedule.item1": "晨间深度工作：策略计划",
    "hero.schedule.item2": "团队同步：Windows 版本排期",
    "hero.schedule.item3": "夜间整理：Dayflow 数据迁移",
    "hero.schedule.tag1": "专注",
    "hero.schedule.tag2": "协作",
    "hero.schedule.tag3": "深潜",
    "features.eyebrow": "核心特性",
    "features.title": "Dayflow 级体验，专为 Windows 精准调校",
    "features.subtitle": "知时延续 Dayflow 的产品哲学，并针对 Windows 的交互、性能与生态整合重新设计，帮助你在熟悉的平台上延续高级时间管理体验。",
    "features.card1.title": "Windows 原生交互体验",
    "features.card1.copy": "熟悉的窗口体系与快捷方式，让 Dayflow 级流程无缝融入 Windows 桌面。",
    "features.card1.item1": "支持触控、笔记本与多显示器布局",
    "features.card1.item2": "Win + Shift 快捷键直达时间轴",
    "features.card1.item3": "整合任务视图与通知中心提醒",
    "features.card2.title": "与 Dayflow 功能完全对齐",
    "features.card2.copy": "保持与 Dayflow 相同的信息架构，无需重新学习工作方式。",
    "features.card2.item1": "原子化日程、能量标签与专注模式",
    "features.card2.item2": "跨平台同步确保团队体验一致",
    "features.card2.item3": "导入 Dayflow 数据即刻延续工作流",
    "features.card3.title": "为生产力团队设计",
    "features.card3.copy": "帮助产品、运营与创作者在 Windows 上维持高效节奏。",
    "features.card3.item1": "情境模板覆盖会议、创作与复盘",
    "features.card3.item2": "仪表盘洞察团队负载与节奏",
    "features.card3.item3": "自动化提醒防止冲突与遗漏",
    "scenarios.eyebrow": "使用场景",
    "scenarios.title": "Windows 团队的节奏中枢",
    "scenarios.subtitle": "无论是产品经理、运营团队，还是希望在 Windows 上保持 Dayflow 状态的创作者，知时都能精准匹配需求。",
    "scenarios.card1.badge": "产品排程",
    "scenarios.card1.title": "与 Microsoft 生态同步项目节奏",
    "scenarios.card1.copy": "连接 Outlook、Teams 与 Planner，结合甘特视图，快速落地版本规划与阶段目标。",
    "scenarios.card2.badge": "创意制作",
    "scenarios.card2.title": "在 Windows Studio 模式延续灵感",
    "scenarios.card2.copy": "支持手写、触控与多屏协作，让灵感捕捉、制作与回顾在同一空间流动。",
    "scenarios.card3.badge": "成长复盘",
    "scenarios.card3.title": "沉浸式数据反馈驱动升级",
    "scenarios.card3.copy": "专注报告、能量日志与周复盘板块，将每一次专注转化为可衡量的成长轨迹。",
    "metrics.eyebrow": "数据见证",
    "metrics.title": "Windows 用户选择知时的理由",
    "metrics.subtitle": "从 Beta 到正式版本，我们针对 Windows 的性能调优、生态整合与细节控件持续迭代，只为让 PC 用户也拥有 Dayflow 级的高级质感。",
    "metrics.value1": "96%",
    "metrics.label1": "团队满意度",
    "metrics.value2": "+2h",
    "metrics.label2": "每日深度时间提升",
    "metrics.value3": "<1s",
    "metrics.label3": "关键操作响应时间",
    "metrics.card.badge": "Windows Flow",
    "metrics.card.state": "状态：顺畅",
    "metrics.card.item1": "桌面模式自动切换专注视图",
    "metrics.card.item2": "Teams 会议同步生成行动卡片",
    "metrics.card.item3": "Win 键快捷调用专注计时器",
    "metrics.card.item4": "Dayflow 数据自动迁移入明日计划",
    "faq.eyebrow": "常见问题",
    "faq.title": "关于知时，你可能想问",
    "faq.subtitle": "如果这里没有解答，欢迎邮件联系我们：hello@zhishi.app",
    "faq.q1": "知时与传统的 Windows 日历应用有什么不同？",
    "faq.a1": "知时继承 Dayflow 的 Time OS 架构，并针对 Windows 深度优化。除了同步日历，更会解析专注区间、能量趋势与协作窗口，让你在 PC 上也能体验到 Dayflow 级的洞察力。",
    "faq.q2": "可以与团队协作或与 Dayflow 同步吗？",
    "faq.a2": "可以。知时支持团队共享空间、权限管理与活动追踪，并与 Dayflow 保持数据结构一致，跨平台同步延迟低于 200ms。",
    "faq.q3": "离线或在多设备间使用体验如何？",
    "faq.a3": "知时提供原生离线缓存，断网时也能继续使用，联网后 3 秒内自动补发。Windows、iOS、Android 与 Web 端保持一致体验。",
    "faq.q4": "如何参与测试或获取最新版本？",
    "faq.a4": "加入知时实验室计划即可优先体验 Beta 版本、查看更新日志，并进入专属社区获取产品支持。",
    "cta.eyebrow": "立即体验",
    "cta.title": "开启为 Windows 优化的时间管理旅程",
    "cta.subtitle": "下载知时 Windows 客户端，或申请加入跨平台体验计划，延续 Dayflow 的高级质感。",
    "cta.primary": "下载 Windows 安装程序",
    "cta.secondary": "加入体验计划",
    "footer.features": "产品特性",
    "footer.support": "支持中心",
    "footer.contact": "合作联系",
    "footer.privacy": "隐私政策",
    "footer.copy": "© 2024 Zhishi Studio. 保留所有权利。"
  },
  en: {
    "meta.title": "Zhishi — Dayflow-grade time management for Windows",
    "meta.description": "Zhishi is a minimalist Time OS built for Windows. It mirrors Dayflow's feature set while tuning interactions, performance, and integrations specifically for the Windows ecosystem.",
    "lang.zh": "中文",
    "lang.en": "English",
    "nav.features": "Features",
    "nav.scenarios": "Scenarios",
    "nav.faq": "FAQ",
    "nav.download": "Download",
    "nav.cta": "Get Zhishi",
    "hero.eyebrow": "Crafted for Windows",
    "hero.title": "Zhishi — Dayflow-grade time management for Windows",
    "hero.subtitle": "Zhishi inherits Dayflow's minimalist Time OS and refines it for Windows with familiar shortcuts, native UI patterns, and performance optimisations—delivering a Mac-level rhythm on your PC.",
    "hero.primary": "Download for Windows",
    "hero.secondary": "Watch the one-minute tour",
    "hero.note": "<strong>40,000+</strong> Windows creators and teams extend their Dayflow momentum with Zhishi.",
    "hero.schedule.date": "May 23",
    "hero.schedule.day": "Thu",
    "hero.schedule.item1": "Morning deep work: strategy sprint",
    "hero.schedule.item2": "Team sync: Windows release cadence",
    "hero.schedule.item3": "Evening organise: Dayflow data migration",
    "hero.schedule.tag1": "Focus",
    "hero.schedule.tag2": "Sync",
    "hero.schedule.tag3": "Deep",
    "features.eyebrow": "Feature set",
    "features.title": "Dayflow parity, precisely tuned for Windows",
    "features.subtitle": "Zhishi mirrors Dayflow's product philosophy while rethinking interactions, performance, and integrations for Windows so you can keep the same refined flow on your PC.",
    "features.card1.title": "Native Windows interactions",
    "features.card1.copy": "Familiar windowing and shortcuts bring the Dayflow journey seamlessly onto the Windows desktop.",
    "features.card1.item1": "Optimised for touch, laptops, and multi-monitor setups",
    "features.card1.item2": "Win + Shift shortcut into your timeline",
    "features.card1.item3": "Action Center and Task view notifications in sync",
    "features.card2.title": "Dayflow feature parity",
    "features.card2.copy": "Keep the same information architecture—no relearning required.",
    "features.card2.item1": "Atomic schedules, energy tags, and focus modes",
    "features.card2.item2": "Cross-platform sync keeps every team member aligned",
    "features.card2.item3": "Import Dayflow data and continue instantly",
    "features.card3.title": "Built for productivity teams",
    "features.card3.copy": "Support product leads, operators, and creators working at Windows speed.",
    "features.card3.item1": "Context templates for meetings, creation, and review",
    "features.card3.item2": "Dashboards spotlight team load and cadence",
    "features.card3.item3": "Automation prevents conflicts and missed actions",
    "scenarios.eyebrow": "Use cases",
    "scenarios.title": "The rhythm hub for Windows teams",
    "scenarios.subtitle": "PMs, operators, and makers who live on Windows can sustain their Dayflow state without compromise.",
    "scenarios.card1.badge": "Product ops",
    "scenarios.card1.title": "Sync project cadence with Microsoft 365",
    "scenarios.card1.copy": "Connect Outlook, Teams, and Planner, then land roadmap milestones with Gantt clarity.",
    "scenarios.card2.badge": "Creative flow",
    "scenarios.card2.title": "Carry ideas through Windows Studio Mode",
    "scenarios.card2.copy": "Stylus, touch, and multi-screen workflows keep capture, production, and review in one fluid space.",
    "scenarios.card3.badge": "Growth review",
    "scenarios.card3.title": "Immersive insights that fuel improvement",
    "scenarios.card3.copy": "Focus reports, energy journals, and weekly retros turn effort into measurable progress.",
    "metrics.eyebrow": "Proof in numbers",
    "metrics.title": "Why Windows teams choose Zhishi",
    "metrics.subtitle": "From beta to launch we honed Windows performance, ecosystem integrations, and micro-interactions so PC users enjoy Dayflow-level polish.",
    "metrics.value1": "96%",
    "metrics.label1": "Team satisfaction",
    "metrics.value2": "+2h",
    "metrics.label2": "Deep work gained daily",
    "metrics.value3": "<1s",
    "metrics.label3": "Action response time",
    "metrics.card.badge": "Windows Flow",
    "metrics.card.state": "Status: smooth",
    "metrics.card.item1": "Desktop mode auto-switches to focus view",
    "metrics.card.item2": "Teams meetings generate action cards instantly",
    "metrics.card.item3": "Win key summons the focus timer on demand",
    "metrics.card.item4": "Dayflow data queues tomorrow's plan automatically",
    "faq.eyebrow": "FAQ",
    "faq.title": "Answers before you ask",
    "faq.subtitle": "Need more insight? Reach us at hello@zhishi.app and we'll reply within a day.",
    "faq.q1": "How is Zhishi different from other Windows calendars?",
    "faq.a1": "Zhishi extends Dayflow's Time OS into Windows with deep optimisation. Beyond syncing calendars, it interprets focus windows, energy trends, and collaboration signals so you gain Dayflow-level intelligence on PC.",
    "faq.q2": "Does it support collaboration or syncing with Dayflow?",
    "faq.a2": "Yes. Shared spaces, permissions, and activity history are built-in, and we maintain schema parity with Dayflow for sub-200ms cross-platform sync.",
    "faq.q3": "What about offline and multi-device usage?",
    "faq.a3": "Native offline caching keeps work moving. Changes sync back within three seconds, and Windows, iOS, Android, plus Web stay perfectly aligned.",
    "faq.q4": "How do I access betas and upcoming builds?",
    "faq.a4": "Join the Zhishi Labs program to receive beta drops, release notes, and a private community for support.",
    "cta.eyebrow": "Experience now",
    "cta.title": "Begin your Windows-optimised time journey",
    "cta.subtitle": "Install the Zhishi Windows client or apply to our cross-platform program to keep the Dayflow polish you love.",
    "cta.primary": "Download Windows installer",
    "cta.secondary": "Join the experience program",
    "footer.features": "Features",
    "footer.support": "Support",
    "footer.contact": "Contact",
    "footer.privacy": "Privacy",
    "footer.copy": "© 2024 Zhishi Studio. All rights reserved."
  }
};

const translationElements = document.querySelectorAll("[data-i18n]");
const languageButtons = document.querySelectorAll("[data-lang]");
const descriptionMeta = document.querySelector('meta[name="description"]');

function applyTranslations(lang) {
  const messages = translations[lang] || translations.zh;

  translationElements.forEach((element) => {
    const key = element.dataset.i18n;
    const value = messages[key];

    if (typeof value === "undefined") {
      return;
    }

    if (element.dataset.i18nType === "html") {
      element.innerHTML = value;
    } else {
      element.textContent = value;
    }
  });

  languageButtons.forEach((button) => {
    const isActive = button.dataset.lang === lang;
    button.classList.toggle("active", isActive);
    button.setAttribute("aria-pressed", String(isActive));
  });

  document.documentElement.lang = lang === "zh" ? "zh-Hans" : "en";
  document.title = messages["meta.title"];
  if (descriptionMeta) {
    descriptionMeta.setAttribute("content", messages["meta.description"]);
  }

  try {
    localStorage.setItem("zhishi-lang", lang);
  } catch (error) {
    /* ignore storage errors */
  }
}

languageButtons.forEach((button) => {
  button.addEventListener("click", () => {
    const lang = button.dataset.lang;
    applyTranslations(lang);
  });
});

function initLanguage() {
  let lang = "zh";

  try {
    const stored = localStorage.getItem("zhishi-lang");
    if (stored && translations[stored]) {
      lang = stored;
    }
  } catch (error) {
    lang = "zh";
  }

  if (!translations[lang]) {
    lang = "zh";
  }

  applyTranslations(lang);
}

function initRevealObserver() {
  const elements = document.querySelectorAll("[data-observe]");

  if (!("IntersectionObserver" in window)) {
    elements.forEach((element) => element.classList.add("in-view"));
    return;
  }

  const observer = new IntersectionObserver(
    (entries, currentObserver) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add("in-view");
          currentObserver.unobserve(entry.target);
        }
      });
    },
    {
      threshold: 0.15,
      rootMargin: "0px 0px -40px 0px"
    }
  );

  elements.forEach((element) => observer.observe(element));
}

initRevealObserver();
initLanguage();
